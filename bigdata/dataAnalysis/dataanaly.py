# -*- coding: utf-8 -*-
"""dataAnaly.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1t4rzSEsUHi5uQJfJBxuRyunoS19Tj2-P
"""

from google.colab import drive
drive.mount('/gdrive')

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from tqdm import tqdm
import warnings
warnings.filterwarnings('ignore')

import random
import seaborn as sns
import matplotlib as mpl

from scipy import stats
from sklearn.metrics.pairwise import cosine_similarity as cs
from mpl_toolkits.axes_grid1.inset_locator import zoomed_inset_axes

df_users = pd.read_csv('/gdrive/My Drive/Colab Notebooks/SSAFY/users.csv')  # ìœ ì € ë°ì´í„°
df_problems = pd.read_csv('/gdrive/My Drive/Colab Notebooks/SSAFY/problems.csv')  # ë¬¸ì œ ë°ì´í„°
df_problems_solved = pd.read_csv('/gdrive/My Drive/Colab Notebooks/SSAFY/user_solved_problems_fixed.csv')  # ìœ ì €ë³„ í‘¼ ë¬¸ì œ ë°ì´í„°
df_records_solved = pd.read_csv('/gdrive/My Drive/Colab Notebooks/SSAFY/user_lately_solved_problems2.csv')  # ìœ ì €ë³„ ìµœê·¼ 60ê°œì˜ 'ë§í˜”ìŠµë‹ˆë‹¤' ë°ì´í„°

display(df_users)

display(df_problems)

df_problems[df_problems.averageTries == 7340]

df_problems[~df_problems.tags.isnull()]

display(df_problems_solved)

# NA ê°’ì´ ìˆëŠ”ì§€ í™•ì¸
df_problems.isna().sum(axis=0)/22988

"""íƒœê·¸ì— NA ê°’ì´ ì „ì²´ ë°ì´í„°ì—ì„œ ì•½ 31% ì¡´ì¬í•¨. => prepocessing needed"""

df_problems[df_problems.tags.isna()==1]

# ë¬¸ì œ ë°ì´í„°ì˜ í†µê³„
df_problems.describe()

"""averageTriesì˜ maxê°’ì´ 6,847ì¸ ë°ì´í„°ëŠ” í™•ì¸ì´ í•„ìš”í•´ë³´ì„."""

# ë¬¸ì œ ë°ì´í„°ì˜ ê° ì»¬ëŸ¼ì˜ ê³ ìœ ê°’ ê°œìˆ˜ êµ¬í•˜ê¸°
print('problemId ê³ ìœ ê°’:', df_problems.problemId.nunique())
print('level ê³ ìœ ê°’:', df_problems.level.nunique())
print('titleKo ê³ ìœ ê°’:', df_problems.titleKo.nunique())
print('tags ê³ ìœ ê°’: ', len(set(sum(df_problems.tags.apply(lambda x: str(x).split(',')).to_list(),[]))))

# ë¬¸ì œ ë°ì´í„°ì˜ ì—°ì†í˜• ë³€ìˆ˜ ì»¬ëŸ¼ í™•ì¸
# - accepted_user_count
fig, ax= plt.subplots(figsize=[8,8])
ax= sns.boxplot(df_problems.acceptedUserCount)
ax= sns.violinplot(df_problems.acceptedUserCount)

ax2 = plt.axes([0.6, 0.6, .2, .2], facecolor='w')
ax2= sns.boxplot(df_problems.acceptedUserCount, ax=ax2)
ax2.set_xlim([0,665])
ax2.set_title('zoom to mean')

print(df_problems.acceptedUserCount)

"""ë¬¸ì œë³„ ë§ì€ ì‚¬ëŒ ìˆ˜ê°€ í‰ê·  ê°’ì¸ 665 ê·¼ì²˜ë¡œ ì ë ¤ìˆìŒ."""

# avergeTries
fig, ax= plt.subplots(figsize=[5,5])
ax= sns.boxplot(df_problems.averageTries)
ax= sns.violinplot(df_problems.averageTries)

df_problems[df_problems.averageTries == 6847]

"""ë¬¸ì œ ì‹œë„ íšŸìˆ˜ì—ì„œ ì´ì „ì— ë³´ì•˜ë˜ ê²ƒì²˜ëŸ¼ 6,847ì¸ ì´ìƒì¹˜ê°€ í•˜ë‚˜ ì¡´ì¬í•¨."""

fig, ax= plt.subplots(figsize=[5,5])
ax= sns.boxplot(df_problems[df_problems.averageTries!=6847].averageTries)
ax= sns.violinplot(df_problems[df_problems.averageTries!=6847].averageTries)

ax2 = plt.axes([0.6, 0.6, .2, .2], facecolor='w')
ax2= sns.boxplot(df_problems[df_problems.averageTries!=6847].averageTries, ax=ax2)
ax2.set_xlim([0,3])
ax2.set_title('zoom to mean')

"""ì´ìƒì¹˜ë¥¼ ì œê±°í–ˆì„ ë•Œ, í‰ê· ê°’ì¸ 2ì— í‰ê·  ì‹œë„ íšŸìˆ˜ê°€ ëª°ë ¤ìˆìŒ.

averageTriesê°€ 6847ì¸ ë°ì´í„°ëŠ” ì œì™¸í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒìœ¼ë¡œ ë³´ì„.
"""

print('ì œê±° ì „:', len(df_problems))
df_problems.drop(df_problems[df_problems.averageTries == 6847].index, axis=0, inplace=True)
print('ì œê±° í›„:', len(df_problems))

# ìœ ì €ê°€ ë§íŒ ë¬¸ì œ ìˆ˜ë¥¼ ë¶„ì„

def num(x):
    return len(str(x).split(','))

df_problems_solved['num']= df_problems_solved.problems.apply(num)
df_problems_solved[['id', 'num']]

df_problems_solved.num.describe()

"""ìœ ì €ê°€ í‘¼ ë¬¸ì œ ìˆ˜ì˜ í‰ê· ì€ 133ê°œì…ë‹ˆë‹¤."""

fig, ax= plt.subplots(figsize=[5,5])
ax= sns.boxplot(df_problems_solved.num)
ax= sns.violinplot(df_problems_solved.num)

ax2 = plt.axes([0.6, 0.6, .2, .2], facecolor='w')
ax2= sns.boxplot(df_problems_solved.num, ax=ax2)
ax2.set_xlim([0,363])
ax2.set_title('zoom to mean')

"""ìœ ì €ì˜ ë¬¸ì œ í’€ì´ ìˆ˜ëŠ” í‰ê· ì¸ 133ê°œì— ëª°ë ¤ìˆë„¤ìš”."""

# ê°€ì¥ ë¬¸ì œë¥¼ ë§ì´ í‘¼ ìœ ì €ëŠ”?

df_problems_solved[df_problems_solved.num== 11226]

"""usersì— ê¸°ë¡ëœ koosagaì˜ solved_countì¸ 11075ì™€ ê°’ì´ ë‹¤ë¥´ë„¤ìš”. ğŸ˜®
  
ì´ëŠ” BOJì™€ solved.acì—ì„œ ì§‘ê³„í•˜ëŠ” ë¬¸ì œ ìˆ˜ì˜ ì°¨ì´, ë¶€ë¶„ ì ìˆ˜ê°€ ë“¤ì–´ê°€ëŠ” 100% ë§ì§€ ëª»í•œ ë¬¸ì œ ë“± ì—¬ëŸ¬ ìš”ì¸ìœ¼ë¡œ ì¸í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
"""

# ìœ ì € ë°ì´í„°ì—ì„œ ë¬¸ì œë¥¼ í•˜ë‚˜ë„ í’€ì§€ ì•Šì€ ì‚¬ëŒì˜ ìˆ˜ëŠ” ëª‡ ëª…?
print("ë¬¸ì œë¥¼ í•œ ë²ˆë„ ì•ˆ í‘¼ ì‚¬ëŒì˜ ìˆ˜ :", len(df_users.loc[df_users['solved_count'] == 0]))

print(len(df_users))

"""ì•½ 2%(1.6815)ì˜ ìœ ì €ê°€ ë¬¸ì œë¥¼ í•˜ë‚˜ë„ í’€ì§€ ì•Šì•˜ìŒì„ ì•Œ ìˆ˜ ìˆìŒ."""

# ë¬¸ì œì˜ ì•Œê³ ë¦¬ì¦˜ì„ ë¶„ë¥˜í•˜ëŠ” íƒœê·¸ì˜ ì¢…ë¥˜ ìˆ˜ êµ¬í•˜ê¸°
set_tags = set()
for tags in df_problems['tags'].dropna().values:
    for tag in tags.split(','):
        set_tags.add(tag)

print("tagì˜ ì¢…ë¥˜ ìˆ˜ :", len(set_tags))

"""ì´ 191ê°œì˜ íƒœê·¸ê°€ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ."""

# ë¬¸ì œì˜ IDë³„ë¡œ ì œëª©, í’€ë¦° íšŸìˆ˜ ê·¸ë¦¬ê³  ë ˆë²¨(í‹°ì–´)ì„ ë¹ ë¥´ê²Œ ì½ì„ ìˆ˜ ìˆë„ë¡ dictionary í˜•íƒœë¡œ ì €ì¥í•˜ê¸°
id2title = dict() # ë¬¸ì œ idì™€ titleì„ ë”•ì…”ë„ˆë¦¬ë¡œ ì €ì¥
id2count = dict() # ë¬¸ì œ idë³„ë¡œ í’€ë¦° íšŸìˆ˜ë¥¼ ì„¸ê¸° ìœ„í•œ ë”•ì…”ë„ˆë¦¬ ìƒì„±
id2level = dict() # ë¬¸ì œ idë³„ë¡œ ë ˆë²¨ ë”•ì…”ë„ˆë¦¬
for i in tqdm(range(len(df_problems))):
    id2title[df_problems.iloc[i, 1]] = df_problems.iloc[i, 2]
    id2count[df_problems.iloc[i, 1]] = 0
    id2level[df_problems.iloc[i, 1]] = df_problems.iloc[i, 6]

# ì±„ì ì„ í—ˆìš©í•˜ì§€ ì•Šì•„ì„œ ì•„ì˜ˆ ì²˜ìŒë¶€í„° í’€ ìˆ˜ ì—†ëŠ” ë¬¸ì œëŠ” ë¬´ì—‡ì¼ê¹Œ?
# is_solvable == Falseì¸ ê²ƒë“¤ í™•ì¸
non_solvable = df_problems.loc[df_problems['isSolvable'] == False]
non_solvable

"""304ê°œì˜ ë¬¸ì œê°€ í’€ ìˆ˜ ì—†ëŠ” ê²ƒìœ¼ë¡œ ë‚˜íƒ€ë‚¨."""

# ì•„ì˜ˆ í’€ ìˆ˜ ì—†ëŠ” ë¬¸ì œëŠ” ë¶„ì„ì—ì„œ ì œì™¸

# isSolvable == False ì¸ ë¬¸ì œëŠ” ì œì™¸
df_problems = df_problems.drop(index=non_solvable.index).reset_index(drop=True)
df_problems

# ë¬¸ì œ ë ˆë²¨(í‹°ì–´) ë¶„ì„

# ë¬¸ì œ ë ˆë²¨ ì¢…ë¥˜ í™•ì¸í•˜ê¸°
print(sorted(df_problems['level'].unique()))

"""0ë¶€í„° 30ê¹Œì§€ì˜ ì •ìˆ˜ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŒ."""

# ë¬¸ì œ ë ˆë²¨ ë¶„í¬ í™•ì¸í•˜ê¸°

level_cnt = df_problems['level'].value_counts().sort_index()

plt.figure(figsize=(15,5))
sns.barplot(x=level_cnt.index, y=level_cnt.values)

"""ë ˆë²¨ì´ 0ì¸ ê²ƒì´ ë„ˆë¬´ ë§ìŒ.
  
ë ˆë²¨ì´ 0ì¸ ë¬¸ì œëŠ” ë‚œì´ë„ê°€ ë§¤ê²¨ì§€ì§€ ì•Šì€ ë¬¸ì œì´ë¯€ë¡œ ì´ë¥¼ ì œì™¸í•˜ì—¬ ë¶„í¬ë¥¼ ë‹¤ì‹œ ê·¸ë¦°ë‹¤.
"""

# levelì´ 0ì¸ ê²ƒì„ ì œì™¸í•œ í›„ ë‹¤ì‹œ ë¶„í¬ë¥¼ í™•ì¸.
df_problems = df_problems.loc[df_problems['level'] != 0].reset_index(drop=True)

level_cnt = df_problems['level'].value_counts().sort_index()

plt.figure(figsize=(15,5))
sns.barplot(x=level_cnt.index, y=level_cnt.values)

"""ë‚œì´ë„ê°€ ë§¤ê²¨ì§„ ë¬¸ì œë“¤ì€ ì¤‘ê°„ ë¶€ë¶„ì˜ ë ˆë²¨ì— ë§ì´ ë¶„í‘œí•´ìˆìŒ.
  
ê°€ì¥ ë§ì´ ë¶„í¬í•œ ë ˆë²¨ì€ ë¸Œë¡ ì¦ˆ 2ì´ê³ , ê·¸ ì™¸ì˜ ê³¨ë“œ4ì™€ ê³¨ë“œ 3ì—ë„ ë§ì´ ë¶„í¬í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ.
  
ì¦‰, ì¤‘ê°„ ì •ë„ì˜ ë‚œì´ë„ë¥¼ ê°€ì§„ ë¬¸ì œë“¤ì´ ëŒ€ì²´ë¡œ ë§ì´ ë‚œì´ë„ê°€ ë§¤ê²¨ì¡Œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŒ.
"""

# ìœ ì €ë³„ í‘¼ ë¬¸ì œ ë¶„ì„

# ìœ ì €ë“¤ì´ ì–´ë– í•œ ë¬¸ì œë¥¼ ë§ì´ í’€ì—ˆëŠ”ì§€, ì–´ë–¤ íƒœê·¸ ìœ„ì£¼ì˜ ë¬¸ì œë¥¼ ì£¼ë¡œ í’€ì—ˆëŠ”ì§€ ë¶„ì„


# ë¬¸ì œë³„ë¡œ í’€ë¦° íšŸìˆ˜ ê³„ì‚°
for i in tqdm(range(len(df_problems_solved))):
    try:
        pro = list(df_problems_solved.iloc[i, 2].split(','))
        for j in pro:
            j = int(j)
            id2count[j] += 1
    except:
        pass

# ë¬¸ì œë³„ë¡œ í’€ë¦° íšŸìˆ˜ë¥¼ ê³„ì‚°í•œ ë°ì´í„°í”„ë ˆì„
# count ì»¬ëŸ¼ì´ í’€ë¦° íšŸìˆ˜.
df_problem_count = pd.DataFrame({'problem_id' : id2count.keys(), 'count' : id2count.values()})
df_problem_count['title'] = df_problem_count['problem_id'].apply(lambda x : id2title[x])
df_problem_count['level'] = df_problem_count['problem_id'].apply(lambda x : id2level[x])
df_problem_count.sort_values('count', inplace=True, ascending=False)
df_problem_count[:10]

# ì–´ë–¤ íƒœê·¸ê°€ ë§ì´ í’€ë ¸ë‚˜?

# isSolvable == True, level > 0ì¸ ë¬¸ì œë“¤ì˜ íƒœê·¸ ë¶„í¬ í™•ì¸
dict_tag_cnt = {i:int(j) for i, j in zip(set_tags, np.zeros(len(set_tags)))}
for i in tqdm(range(len(df_problems))):
    tags = df_problems.iloc[i, 6]
    try:
        for tag in tags.split(','):
            dict_tag_cnt[tag] += 1
    except:
        pass

# ë§ì´ í’€ë¦° tag íšŸìˆ˜ì— ê´€í•œ ë°ì´í„°í”„ë ˆì„
# tag_count ì»¬ëŸ¼ì´ ê° tagë³„ í’€ë¦° íšŸìˆ˜

df_tag_count = pd.DataFrame({'tag' : dict_tag_cnt.keys(), 'tag_count' : dict_tag_cnt.values()})
df_tag_count.sort_values('tag_count', ascending=False, inplace=True)
df_tag_count.reset_index(drop=True, inplace=True)
df_tag_count[:10]

"""ì¶”í›„ ëŒ€í‘œ íƒœê·¸ë¥¼ ì„ ì •í•´ inputìœ¼ë¡œ ì‚¬ìš©í•´ë„ ì¢‹ì„ ê²ƒì´ë¼ê³  íŒë‹¨í•¨."""

# ìœ ì €ê°€ ìµœê·¼ì— ì–´ë– í•œ ë¬¸ì œë“¤ì„ ë§ì´ í’€ì—ˆëŠ”ì§€?

# ëª¨ë“  ìœ ì €ê°€ ìµœê·¼ì— í’€ì—ˆë˜ ë¬¸ì œ ì¢…ë¥˜ ìˆ˜
print("ëª¨ë“  ìœ ì €ê°€ ìµœê·¼ì— í’€ì—ˆë˜ ë¬¸ì œ ì¢…ë¥˜ ìˆ˜ :", df_records_solved['problem'].nunique(), "ê°œ")

# ìœ ì €ê°€ ê°™ì€ ë¬¸ì œì— ê´€í•´ "ë§ì•˜ìŠµë‹ˆë‹¤" ì œì¶œì„ ì—¬ëŸ¬ ë²ˆ í–ˆìœ¼ë©´ ê°€ì¥ ìµœê·¼ í’€ì—ˆë˜ ê¸°ë¡ë§Œ ë‚¨ê²¨ë‘˜ê²Œìš”.

# ì‚¬ìš©ìê°€ ë˜‘ê°™ì€ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤ë©´ ìµœê·¼ì— í’€ì—ˆë˜ ê¸°ë¡ë§Œ ë‚¨ê²¨ë‘ .
df_records_solved = df_records_solved.drop_duplicates(subset=('handle', 'problem')).reset_index(drop=True)
df_records_solved

# ìµœê·¼ "ë§ì•˜ìŠµë‹ˆë‹¤" ê¸°ë¡ì—ì„œ ë¬¸ì œë¥¼ 10ê°œ ì´ìƒ í‘¼ ìœ ì €ì˜ ìˆ˜ëŠ” ëª‡ ëª…ì¼ê¹Œìš”?

group_records_solved = df_records_solved.groupby('handle')['problem'].count()
print("ë¬¸ì œë¥¼ 10ê°œ ì´ìƒ í‘¼ ìœ ì €ì˜ ìˆ˜ :", len(group_records_solved[group_records_solved >= 10]), 'ëª…')

"""ë§Œì•½ "ë§ì•˜ìŠµë‹ˆë‹¤" ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ ì•½ 88%ì˜ ìœ ì €ëŠ” ìµœê·¼ì— í‘¼ 10ê°œ ì´ìƒì˜ ë¬¸ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¢€ ë” ê°œì¸í™”ëœ ë¬¸ì œë¥¼ ì¶”ì²œí•  ìˆ˜ ìˆê² ë„¤ìš”.
  
í•˜ì§€ë§Œ ìµœê·¼ ì±„ì  ë°ì´í„°ëŠ” ì›¹ ìŠ¤í¬ë ˆì´í•‘ì´ ë¶ˆê°€í•˜ë¯€ë¡œ ì¶”ì²œ ëª¨ë¸ë§ì—ëŠ” ì‚¬ìš©í•˜ê¸°ê°€ ì–´ë ¤ì›Œë³´ì…ë‹ˆë‹¤. ğŸ˜¢
  
ë‚˜ì¤‘ì— ê¸°íšŒê°€ ë˜ë©´ sequential model ì œì‘ì— ë„ì „í•´ ë´ì•¼ê² ë„¤ìš”. ğŸ§
"""

# ë¹„ìŠ·í•œ ë¬¸ì œ íƒìƒ‰ ë°©ë²• í…ŒìŠ¤íŠ¸
# ì–´ë–¤ í•œ ë¬¸ì œì™€ ìœ ì‚¬í•œ ë¬¸ì œëŠ” ì–´ë–»ê²Œ ì°¾ëŠ” ê²Œ ì¢‹ì„ê¹Œ? ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì‹œë„í•´ë³´ê¸°
# ì˜ˆì‹œë¡œ ë¬¸ì œ 1027ë²ˆê³¼ ìœ ì‚¬í•œ ë¬¸ì œë¥¼ ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì°¾ì•„ë³´ê¸°

df_problems.loc[df_problems['problemId'] == 1027]

# 1. cosine ìœ ì‚¬ë„

# ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ë°˜
df_for_test = df_problems[['problemId', 'titleKo', 'level', 'averageTries']]
for i in list(list(set_tags)):
    df_for_test[i] = 0

for i in tqdm(range(len(df_problems))):
    tags = df_problems.iloc[i, 6]
    try:
        for tag in tags.split(','):
            df_for_test.iloc[i, list(df_for_test.columns).index(tag)] += 1
    except:
        pass

temp = df_for_test.iloc[:, 2:].values
sim = cs(temp, temp)

sim_scores = list(enumerate(sim[27]))
sim_scores = sorted(sim_scores, key=lambda x: x[1], reverse=True)
sim_scores = sim_scores[1:20]
print(sim_scores)

# êµ¬í•œ cosine ìœ ì‚¬ë„ ê°’ì´ ê°€ì¥ ë†’ì€ ë¬¸ì œ ì •ë³´ë¥¼ í™•ì¸

idx = np.array(sim_scores)[:, 0]
df_for_cos = df_for_test.iloc[idx]
df_for_cos

# ìœ í´ë¦¬ë“œ ê±°ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬í•œ ë¬¸ì œ êµ¬í•˜ê¸°


# ê·¸ì „ì— ë‘ ì¢Œí‘œ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ êµ¬í•˜ëŠ” ì‹ì„ í•¨ìˆ˜ë¡œ ì •ì˜
def dist(x,y):
    return np.sqrt(np.sum((x-y)**2))

# ìœ í´ë¦¬ë“œ ê±°ë¦¬ ê¸°ë°˜ ìœ ì‚¬í•œ ë¬¸ì œ êµ¬í•˜ê¸°
problem_idx = 27
list_dist = []
for i, j in tqdm(enumerate(temp)):
    list_dist.append((i, dist(temp[problem_idx], j)))

list_dist = sorted(list_dist, key = lambda x : x[1])
list_dist = list_dist[:20]
print(list_dist)

# ë¬¸ì œê°„ ê±°ë¦¬ê°€ ê°€ê¹Œìš¸ìˆ˜ë¡ ìœ ì‚¬í•œ ë¬¸ì œ
df_for_euclidean = df_for_test.iloc[np.array(list_dist)[1:,0]]
df_for_euclidean

"""ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë³´ë‹¤ëŠ” ìœ í´ë¦¬ë“œ ê¸°ë°˜ìœ¼ë¡œ ê±°ë¦¬ê°€ ê°€ê¹Œìš´ ë¬¸ì œë¥¼ êµ¬í•œ ê²ƒì˜ ë ˆë²¨ì´ ì „ë°˜ì ìœ¼ë¡œ ë¹„êµ ëŒ€ìƒì¸ 1027ë²ˆ ë¬¸ì œì˜ ë ˆë²¨ê³¼ ë¹„ìŠ·í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."""

df_for_cos[(df_for_cos.bruteforcing == 1) & (df_for_cos.geometry == 1) & (df_for_cos.math == 1)]

df_for_euclidean[(df_for_euclidean.bruteforcing == 1) & (df_for_euclidean.geometry == 1) & (df_for_euclidean.math == 1)]

"""ê·¸ëŸ¬ë‚˜ ë¬¸ì œ 1027ë²ˆì˜ íƒœê·¸ì™€ ê°€ì¥ ìœ ì‚¬í•˜ê²Œ ì¶”ì²œëœ ë°©ë²•ì€ ì½”ì‚¬ì¸ ìœ ì‚¬ë„.
ë‘ ë°©ë²•ì„ ì ì ˆíˆ ì¡°í™”í•´ì„œ ì¶”ì²œì„ í•˜ë“ ê°€, ì•„ë‹ˆë©´ ë ˆë²¨ê³¼ íƒœê·¸ì— ê´€í•´ í•„í„°ë§ í•  ë•Œ ê° ê²½ìš°ì— ê´€í•´ ì¢€ ë” ë‚˜ì€ ì„±ëŠ¥ì„ ë³´ì´ëŠ” ë°©ë²•ì„ ê³ ë ¤ ê°€ëŠ¥. 
"""

# í‘¼ ë¬¸ì œê°€ ì—†ì§€ë§Œ ê²½í—˜ì¹˜ ë˜ëŠ” í‹°ì–´ê°€ ì¡´ì¬í•˜ëŠ” ìœ ì €

# í‘¼ ë¬¸ì œ ìˆ˜ê°€ 0ì¸ ìœ ì €ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ í•™ì¸í•´ ë´„
df_users[df_users.solved_count == 0]

print('í‘¼ ë¬¸ì œ ìˆ˜ê°€ 0ì¸ ìœ ì €(1,510ëª…) ì¤‘ ratingì´ë‚˜ expê°€ 0ì´ ì•„ë‹Œ ìœ ì €ë“¤:',len(df_users[(df_users.solved_count == 0) & ((df_users.rating !=0)|(df_users.exp !=0))]))

"""1,510ëª… ì¤‘ ratingì´ë‚˜ expê°€ 0ì´ ì•„ë‹Œ ìœ ì €ë“¤ì€ 19ëª… ì…ë‹ˆë‹¤.

í•´ë‹¹ ìœ ì €ë“¤ì€ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” solved.acì—ì„œ ì œì¬ë‹¹í•œ ìœ ì €ì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.
ëŒ€í‘œì ì¸ solved.acì—ì„œ ì‚¬ìš©ìë¥¼ ì œì¬í•˜ëŠ” ê²½ìš° : ë¶€ì •í–‰ìœ„ë¡œ ë¬¸ì œë¥¼ ë§ì¶˜ ê²½ìš°
ì´ì™€ ë¹„ìŠ·í•œ ê²½ìš°ë¡œ ë°œìƒí•œ ë°ì´í„°ë¡œëŠ” í‘¼ ë¬¸ì œ ìˆ˜ê°€ 0ê°œê°€ ì•„ë‹ˆì§€ë§Œ ratingê³¼ expê°€ ëª¨ë‘ 0ì¸ ìœ ì €ë“¤ì´ ë°ì´í„°ë¡œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.
"""

# 1,510ëª…ì€ í‘¼ ë¬¸ì œì— ëŒ€í•œ ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í•´ë‹¹ ìœ ì €ë“¤ì€ df_usersì—ì„œ ì œê±°

print('solved_countê°€ 0ì¸ ìœ ì €ë“¤ ì œê±° ì „:', len(df_users))
df_users.drop(df_users[df_users.solved_count == 0].index.to_list(), inplace=True)
print('solved_countê°€ 0ì¸ ìœ ì €ë“¤ ì œê±° ì „:', len(df_users))

df_users[df_users.solved_count == 0]

# ìœ ì € í´ë˜ìŠ¤ ë¶„ì„

# ìœ ì € í´ë˜ìŠ¤ í†µê³„ë¥¼ í™•ì¸
df_users.user_class.describe()

# classê°€ 0ì¸ ìœ ì €ë¥¼ ì‚´í´ë´„

df_users[df_users.user_class==0]

# í‘¼ ë¬¸ì œ ìˆ˜ê°€ 0ì´ ì•„ë‹ˆì§€ë§Œ ratingê³¼ exp(ê²½í—˜ì¹˜)ê°€ ëª¨ë‘ 0ì¸ ìœ ì €ë“¤

print('classê°€ 0ì¸ ìœ ì €ë“¤ ì¤‘ ratingê³¼ expê°€ ëª¨ë‘ 0ì¸ ìœ ì €:',len(df_users[(df_users.user_class==0) & (df_users.rating ==0) & (df_users.exp ==0)]))

df_problems_solved[df_problems_solved.handle.isin(list(df_users[(df_users.user_class==0) & (df_users.rating ==0) & (df_users.exp ==0)]['handle']))]

"""ì´ 11ëª…ì˜ ìœ ì €ë“¤ ì¤‘ì—” problems_solvedì— ê¸°ë¡ëœ ìœ ì €(6ëª…)ë„ ìˆê³  ì•„ë‹Œ ìœ ì €ë„ ìˆìŠµë‹ˆë‹¤."""

# ìœ ì €ì˜ í´ë˜ìŠ¤ ë¶„í¬ë¥¼ í™•ì¸

plt.subplots(figsize=(7,7))
df_users.user_class.astype('str')
ax=sns.barplot(df_users.user_class.astype('str').value_counts().index,df_users.user_class.astype('str').value_counts())

for p in ax.patches:
    height = p.get_height()
    ax.text(p.get_x() + p.get_width() / 2., height + 3.5, height, ha = 'center', size = 9)

"""
classê°€ ë†’ì•„ì§ˆìˆ˜ë¡ ê·¸ì— í•´ë‹¹í•˜ëŠ” ìœ ì € ìˆ˜ë„ ê°ì†Œ."""

# ìœ ì € í‹°ì–´ ë¶„ì„

# ìœ ì € í‹°ì–´ í†µê³„ë¥¼ ì‚´í´ë´„.
df_users.tier.describe()

plt.subplots(figsize=(10,7))
df_users.tier.astype('str')
ax=sns.barplot(df_users.tier.astype('str').value_counts().index,df_users.tier.astype('str').value_counts(), order= df_users.tier.astype('str').unique())

"""user_classì™€ ë‹¬ë¦¬ tierëŠ” 0ê³¼ 6-7(ì‹¤ë²„ 1~2) í‹°ì–´ì— ìœ ì €ë“¤ì´ ë§ì´ ë¶„í¬í•¨.
  
14, 15 í‹°ì–´ì— ë˜í•œ ìœ ì €ë“¤ì´ ë§ì´ ë¶„í¬.
"""

# ë¬¸ì œ ë ˆë²¨ë³„ ë°ì´í„° ë¶„ì„

# ë¬¸ì œ ë ˆë²¨ë³„ ë¬¸ì œ í‰ê·  ì‹œë„ íšŸìˆ˜
plt.figure(figsize=(15,5))
graph = sns.barplot(x=df_problems.level, y=df_problems.averageTries)
graph.axhline(np.mean(df_problems.averageTries))
plt.show()

# ë¬¸ì œ ë ˆë²¨ë³„ ë§íŒ ì‚¬ëŒ ìˆ˜ì˜ ë¶„í¬

plt.figure(figsize=(15,5))
graph = sns.barplot(x=df_problems.level, y=df_problems.acceptedUserCount)
graph.axhline(np.mean(df_problems.averageTries))
plt.show()

# ë ˆë²¨ì´ 1ì—ì„œ 3ì¸ ê²ƒì„ ì œì™¸í•˜ê³  ì¡°íšŒ
tmp = df_problems.groupby('level')['acceptedUserCount'].mean()[df_problems.groupby('level')['acceptedUserCount'].mean() < 2000]

plt.figure(figsize=(15,5))
graph = sns.barplot(x=tmp.index, y=tmp.values)
plt.show()

"""ëŒ€ì²´ë¡œ ì…ë¬¸ ë‹¨ê³„ì¸ í•˜ìœ„ê¶Œ ë¬¸ì œê°€ ë§ì´ í’€ë ¸ê³ , í•˜ìœ„ê¶Œ ë¬¸ì œë¥¼ ì œì™¸í•˜ì—¬ë„ ë¬¸ì œì˜ ë‚œì´ë„ê°€ ë†’ì•„ì§ˆ ìˆ˜ë¡ ë§íŒ ìœ ì €ì˜ ìˆ˜ëŠ” ê¸‰ê²©íˆ ê°ì†Œ."""

# ë¬¸ì œ ë ˆë²¨ë³„ íƒœê·¸ ë¶„ì„.

# ê° ë¬¸ì œ ë ˆë²¨ë³„ íƒœê·¸ ì¢…ë¥˜ì˜ ìˆ˜ë¥¼ ì§‘ê³„.


# tagì— nan ê°’ì´ ìˆëŠ” í–‰ë“¤ ì‚­ì œ
new_df_problems = df_problems.dropna()

# ê° ë ˆë²¨ë³„ íƒœê·¸ ìœ í˜•ë³„ ê°œìˆ˜ ì €ì¥
tags_per_level = {}

for x in df_problems.level.unique():
    levelx_tags = ','.join(new_df_problems[new_df_problems.level == x].tags.values).split(',')
    levelx_tags = pd.DataFrame(pd.Series(levelx_tags).value_counts())
    levelx_tags.reset_index(inplace=True, drop=False)
    levelx_tags.columns = ['tag', 'level'+str(x)]
    
    tags_per_level["level" + str(x)] = levelx_tags

# ë ˆë²¨ 1ì˜ íƒœê·¸ë³„ ë¶„í¬

# level1ì¸ ê²½ìš°
tags_per_level['level1']

# ë¬¸ì œì˜ ë ˆë²¨ë³„ë¡œ ì†í•´ìˆëŠ” íƒœê·¸ ìˆ˜

level_tags = pd.DataFrame(columns={'level', 'level_tag_count'})

for i in range(1, 31):
    level_tags = level_tags.append({'level': 'level'+str(i), 'level_tag_count': len(tags_per_level['level'+str(i)])}, ignore_index=True)
    
plt.figure(figsize=(15,5))
graph = sns.barplot(x=level_tags.level, y=level_tags.level_tag_count)

for item in graph.get_xticklabels():
    item.set_rotation(45)

plt.show()

# íƒœê·¸ë³„ ë¬¸ì œ ë ˆë²¨ ë¶„ì„

# ê° íƒœê·¸ë³„ë¡œ ê° ë ˆë²¨ì— ëª‡ ë²ˆ ë“±ì¥í•˜ëŠ”ì§€ êµ¬í•˜ê¸°


# ê° íƒœê·¸ë³„ ëª¨ë“  ë ˆë²¨ ê°’ì„ mergeí•œë‹¤.
tags_all_level = pd.merge(tags_per_level['level1'], tags_per_level['level2'], on='tag', how='outer')

for i in range(3, 31):
    tags_all_level = pd.merge(tags_all_level, tags_per_level['level'+str(i)], on='tag', how='outer')

tags_all_level.fillna(0, inplace=True)
tags_all_level.head()

# ê° íƒœê·¸ë³„ë¡œ ê° ë ˆë²¨ì— ì–´ë–»ê²Œ ë¶„í¬ë˜ì–´ ìˆëŠ”ì§€ë¥¼ í™•ì¸

# ê° ë ˆë³„ë³„ íƒœê·¸ì˜ ë¹„ìœ¨ ë¶„í¬ë¥¼ í™•ì¸í•˜ê¸° (ìƒëŒ€ë¹„êµë¥¼ ìœ„í•´ ê° ë ˆë²¨ì˜ íƒœê·¸ ê°œìˆ˜ë¥¼ ë¬¸ì œ ìˆ˜ ë§Œí¼ ë‚˜ëˆ„ê¸°)
tags_all_level_ratio = tags_all_level.copy()

# ê° ë ˆë²¨ë³„ ë¬¸ì œ ìˆ˜ ì •ë¦¬
level_ques = pd.DataFrame(new_df_problems.level.value_counts())
level_ques.reset_index(inplace=True, drop=False)
level_ques.columns = ['level', 'nums']

# ê° ë ˆë²¨ì˜ íƒœê·¸ ê°œìˆ˜ì—ì„œ ë¬¸ì œ ìˆ˜ ë‚˜ëˆ„ê¸°
for i in range(1, 31):
    tags_all_level_ratio['level'+str(i)] = tags_all_level['level'+str(i)]/level_ques[level_ques['level'] == i].nums.values[0]

tags_all_level_ratio

# ê°€ì¥ ëŒ€í‘œì ì¸ íƒœê·¸ì¸ data_structuresë¥¼ ì˜ˆì‹œë¡œ ìƒìœ„ ë ˆë²¨ì—ì„œì˜ ë¶„í¬ë¡œ í™•ì¸

tag_name = 'data_structures'

plt.figure(figsize=(5,5))

x = tags_all_level_ratio[tags_all_level_ratio['tag'] == tag_name].T.iloc[1:,:]
x.columns = ['ratio']
x = x.sort_values('ratio', ascending=False)[:10]

ratio = x['ratio'].values
labels = x.index

#explode = [0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05]

plt.pie(ratio, labels=labels, autopct='%.1f%%')#, explode=explode)
plt.show()

"""ëŒ€í‘œì ìœ¼ë¡œ ê¸°ë³¸ì´ ë˜ëŠ” íƒœê·¸ì¸ data_structuresëŠ” ë‚œì´ë„ë³„ ë“±ì¥ ë¶„í¬ê°€ ê³¨ê³ ë£¨ ë‚˜ì˜¤ê¸°ë„ í•¨."""

# ê° ë¬¸ì œì˜ íƒœê·¸ ì¢…ë¥˜ ìˆ˜ ë¶„ì„

# ê° ë¬¸ì œì— íƒœê·¸ê°€ ëª‡ ì¢…ë¥˜ ë“±ì¥í•˜ëŠ”ì§€ë¥¼ í™•ì¸

problem_tags = df_problems.tags.str.split(',')
problem_tags.fillna('0', inplace=True)
df_problems['tag_num'] = problem_tags.apply(lambda x: len(x))
df_problems.head()

# íƒœê·¸ê°€ ì—†ëŠ” ë¬¸ì œë„ tag_numì´ 1ë¡œ ì§‘ê³„ë˜ëŠ” í˜„ìƒ ì—†ì• ê¸°

# nullì¸ ì¸ë±ìŠ¤ì˜ íƒœê·¸ ê°’ ì œê±°
tags_null_idx = df_problems[df_problems.tags.isnull()].index
df_problems.loc[tags_null_idx, 'tag_num'] -= 1

# ë¬¸ì œë³„ íƒœê·¸ ì¢…ë¥˜ ìˆ˜ ë¶„í¬

sns.displot(df_problems.tag_num, bins=100)

"""ëŒ€ì²´ë¡œ ë¬¸ì œë³„ë¡œ ë‘ ê°œì˜ íƒœê·¸ê°€ ê°€ì¥ ë§ì´ ë“±ì¥í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì´ë„¤ìš”."""

# ë¼ì´ë²Œê³¼ ì—­ë¼ì´ë²Œ ìˆ˜ ë¶„ì„

# ìœ ì €ë³„ ë¼ì´ë²Œê³¼ ì—­ë¼ì´ë²Œ ìˆ˜ì— ê´€í•œ í†µê³„ ì‚´í´ë´„

df_users.rival_count.describe()

df_users.reverse_rival_count.describe()

# ì–¼ë§ˆë‚˜ ë§ì€ ìœ ì €ê°€ solved.acì˜ ë¼ì´ë²Œ ê¸°ëŠ¥ì„ ì´ìš©í•˜ê³  ìˆëŠ”ì§€?

print('rival ìˆ˜ê°€ 0ì¸ ìœ ì € ë¹„ìœ¨:',sum(df_users.rival_count==0)/len(df_users))
print('reverse_rival ìˆ˜ê°€ 0ì¸ ìœ ì € ë¹„ìœ¨:',sum(df_users.reverse_rival_count==0)/len(df_users))
print('reverse_rivalê³¼ rival ìˆ˜ê°€ 0ì¸ ìœ ì € ë¹„ìœ¨:',sum((df_users.reverse_rival_count==0) & (df_users.rival_count==0))/len(df_users))

"""ì „ì²´ ìœ ì € ì¤‘ ì•½ 83%ê°€ í˜„ì¬ ì œê³µë˜ê³  ìˆëŠ” ë¼ì´ë²Œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆìŒ. 
ëŒ€ë‹¤ìˆ˜ì˜ ìœ ì €ê°€ ë¼ì´ë²Œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë§Œí¼, ë¼ì´ë²Œ ì¶”ì²œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë©´ ì¡°ê¸ˆì´ë‚˜ë§ˆ ë¼ì´ë²Œ ê¸°ëŠ¥ì„ í™œì„±í™”ì‹œí‚¬ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œìš”?

ğŸ”– ë¼ì´ë²Œ ê´€ë ¨ ì‹¤í—˜ ë° ê²°ê³¼
  
ë¼ì´ë²Œì— ê´€í•´ ë¶„ì„í•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°€ì„¤ì„ ì„¸ìš°ê³  ê²€ì¦í•´ë³¼ê²Œìš”.
ì´ë¥¼ í†µí•´ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì¶”ì²œ ëª¨ë¸ì„ ë§Œë“¤ì–´ì•¼ í• ì§€, í•„í„°ë§ì€ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼í• ì§€ ê³ ë¯¼í•´ ë´…ì‹œë‹¤.
"""

# ê°€ì„¤ 1: ë¼ì´ë²Œì´ ìˆëŠ” ìœ ì €ë“¤ì€ ê·¸ë ‡ì§€ ì•Šì€ ìœ ì €ë“¤ì— ë¹„í•´ ë¬¸ì œë¥¼ ë” ë§ì´ í’‰ë‹ˆë‹¤.

df_check_rival = df_users.copy()
df_check_rival['has_rival'] = 'NO'

idx = df_check_rival[df_check_rival.rival_count >= 1].index
df_check_rival.loc[idx, 'has_rival'] = 'YES'
df_check_rival

sns.barplot(x='has_rival', y = 'solved_count', data=df_check_rival)

"""rivalì´ ìˆëŠ” ìœ ì €ë“¤ì´ rivalì´ ì—†ëŠ” ìœ ì €ë“¤ì— ë¹„ì— 2ë°° ì´ìƒ ë¬¸ì œë¥¼ ë” ë§ì´ í‘¸ë„¤ìš”.
  
ì—­ì‹œ ë¼ì´ë²Œ ê¸°ëŠ¥ì„ ì´ìš©í•˜ê³  ìˆëŠ” ì‚¬ëŒì€ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ ëŒ€ì²´ë¡œ ë” ë§ì´ í‘¸ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
"""

df_check_rival['has_rival'] = np.where(df_check_rival['has_rival']=='YES', 1 ,0)
stats.pointbiserialr(df_check_rival['has_rival'], df_check_rival['solved_count']).correlation

"""ìƒê´€ê´€ê³„ê°€ 0.2273ë¡œ ì•½í•œ ì–‘ì˜ ìƒê´€ê´€ê³„ë¥¼ ë³´ì—¬ì£¼ë„¤ìš”.
  
[ì •ë¦¬]
  
rivalì˜ ì—¬ë¶€ì™€ ë¬¸ì œ í‘¸ëŠ” íšŸìˆ˜ëŠ” ì•½í•œ ì–‘ì˜ ìƒê´€ê´€ê³„ë¥¼ ë³´ì…ë‹ˆë‹¤.
  
rivalì´ ìˆëŠ” ìœ ì €ë“¤ì´ rivalì´ ì—†ëŠ” ìœ ì €ë“¤ì— ë¹„ì— 2ë°° ì´ìƒì˜ ë¬¸ì œë¥¼ ë” ë§ì´ í’‰ë‹ˆë‹¤.
  
â†’ rivalì´ ìˆìœ¼ë©´ ìœ ì €ë“¤ì´ ë¬¸ì œë¥¼ ë” ë§ì´ í’‰ë‹ˆë‹¤.
  
â†’ rivalì„ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ ì ì ˆí•œ ë¼ì´ë²Œ ì¶”ì²œí•´ì£¼ë©´ ìœ ì €ë“¤ì´ ë¬¸ì œë¥¼ ë” ë§ì´ í’€ì–´ì„œ ê°œì¸ ì‹¤ë ¥ í–¥ìƒê³¼ ë°±ì¤€ ì‚¬ì´íŠ¸ì˜ í™œì„±í™”ì— ë„ì›€ì„ ì¤„ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ğŸ¥³
"""

# ê°€ì„¤ 2: ë¼ì´ë²Œì´ ë§ì„ìˆ˜ë¡ ë¬¸ì œë¥¼ ë” ë§ì´ í’‰ë‹ˆë‹¤.

# ê°€ì„¤ ë°°ê²½: ì ì ˆí•œ ì¶”ì²œ ë¼ì´ë²Œ ìˆ˜ë¥¼ ì°¾ê¸° ìœ„í•´

df_check_rival

df_has_rival = df_check_rival[df_check_rival.has_rival == 1]
df_has_rival

# rival_countì™€ solved_countì™€ì˜ ê´€ê³„ì„±ì„ ì‹œê°í™”.

df_for_pairplot = df_has_rival[['solved_count', 'rival_count']]
sns.pairplot(df_for_pairplot, kind='reg', height=4)  # í˜ì–´í”Œë¡¯ ì‘ì„±

"""ë¼ì´ë²Œ ìˆ˜ì™€ í‘¼ ë¬¸ì œ ìˆ˜ ê°„ì˜ ì•½í•œ ê´€ê³„ì„±ì´ ìˆì–´ ë³´ì…ë‹ˆë‹¤."""

# í†µê³„ì  ê²€ì •(í”¼ì–´ìŠ¨ ìƒê´€ê³„ìˆ˜ ê²€ì •)ì„ í†µí•´ êµ¬ì²´ì ì¸ ìƒê´€ê´€ê³„ íŒŒì•…. *******************************************************************
stats.pearsonr(df_has_rival.rival_count, df_has_rival.solved_count)

"""ìƒê´€ê´€ê³„: 
  
p-value: 
  
    
[ì •ë¦¬]
  
ë¼ì´ë²Œì´ ë§ì„ìˆ˜ë¡ ë¬¸ì œë¥¼ í‘¸ëŠ” íšŸìˆ˜ì™€ ì•½í•œ ìƒê´€ê´€ê³„ë¥¼ ë³´ì…ë‹ˆë‹¤.
  
ì ì ˆíˆ í° ë¼ì´ë²Œ ìˆ˜ë¥¼ ì •í•˜ë©´ ë¬¸ì œ í‘¸ëŠ” íšŸìˆ˜ê°€ ëŠ˜ì–´ë‚  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
"""

# ì‹¤í—˜ 1: ë¼ì´ë²Œì´ ìˆëŠ” ìœ ì €ë“¤ì˜ í‰ê· ì ì¸ ë¼ì´ë²Œ ìˆ˜ëŠ” ëª‡ ëª…ì¼ê¹Œìš”?

# ì‹¤ì œ ë°ì´í„°ì˜ í˜•ìƒì„ ë³´ê¸° ìœ„í•´ ë°”ì´ì˜¬ë¦° í”Œë¡¯ìœ¼ë¡œ ì‹œê°í™”. https://junklee.tistory.com/9
plt.figure(figsize=(10,5))
sns.violinplot(x='rival_count', data=df_has_rival)

# ë¼ì´ë²Œì„ 100ëª… ì´ìƒìœ¼ë¡œ ì •í•œ ìœ ì €ë“¤ í™•ì¸
df_has_rival[df_has_rival.rival_count >=100]

# outside pointë¥¼ ì œì™¸í•œ ë°”ì´ì˜¬ë¦° í”Œë¡¯ì˜ ë¶€ë¶„ í™•ëŒ€
plt.figure(figsize=(10,5))
fig = sns.violinplot(x='rival_count', data=df_has_rival)
fig.set_xlim([-5, 15])
#fig.set_ylim([-0.5, 0.5])

# í‰ê· ì ì¸ rival ìˆ˜ í™•ì¸
print("í‰ê·  rival ìˆ˜:", round(np.mean(df_has_rival.rival_count), 2),'ëª…')

"""[ì •ë¦¬]
  
outside point: 20ëª… ì´ìƒ
  
upper adjacent values(ìƒìœ„ ê·¼ì ‘ ê°’: í•´ë‹¹ ê°’ë³´ë‹¤ í¬ë©´ ì´ìƒì¹˜ë¡œ íŒë³„ ê°€ëŠ¥): 8ëª…
  
median: ì•½ 2.5ëª…
  
mean ì•½ 3.74ëª…
  
â†’ rival ìˆ˜ëŠ” 2~3ëª… ì¶”ì²œìœ¼ë¡œ ì¡ì•„ë„ ë  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. 
"""

# ì‹¤í—˜ 2: ë¼ì´ë²Œë¡œ ì§€ì •í•  ë§Œí•œ ìœ ì €ë¥¼ ì°¾ì•„ë³¼ê¹Œìš”?
# ê¸°ì¤€: ë‚˜ì™€ ë¹„ìŠ·í•œ ì‹¤ë ¥ì˜ ìœ ì € ë˜ëŠ” ë‚˜ë³´ë‹¤ ì‹¤ë ¥ì´ ì¡°ê¸ˆ ë” ë†’ì€ ìœ ì €

df_users[df_users.handle == '1017hana']

# tier 9(Silver II) ì¤‘  1017hanaì˜ ë¼ì´ë²Œ ì°¾ì•„ë³´ê¸°
df_tier_9 = df_users[df_users.tier == 9]
target_user = '1017hana' # ì˜ˆì‹œë¡œ ì“¸ íƒ€ê²Ÿ ìœ ì €

df_tier_9

# 1. íƒ€ê²Ÿ ìœ ì €ì™€ ê°™ê±°ë‚˜ í•œ ë‹¨ê³„ ë†’ì€ í‹°ì–´ë¡œ ì‹¤ë ¥ ë²”ìœ„ë¥¼ ì¤„ì…ë‹ˆë‹¤.

print('í›„ë³´ìˆ˜ ì „:', len(df_users)-1)

df_tier_10 = df_users[df_users.tier == 10]
df_candi_by_tier = pd.concat([df_tier_9, df_tier_10], axis=0)

print('í›„ë³´ìˆ˜ í›„:', len(df_candi_by_tier)-1)
df_candi_by_tier[df_candi_by_tier.tier == 9]

df_candi_by_tier[df_candi_by_tier.tier == 10]

df_candi_by_tier.head()

# 2. rating_by_problems_sum(í‘¼ ë¬¸ì œì˜ ë‚œì´ë„ í•©ìœ¼ë¡œ ê³„ì‚°í•œ ì‚¬ìš©ìì˜ ë ˆì´íŒ…)ì´ ë¹„ìŠ·í•œ ìœ ì €ë“¤ë¡œ ë²”ìœ„ ì¤„ì´ê¸°

t_rating_b_problems_sum = df_tier_9[df_tier_9.handle == target_user].rating_by_problems_sum.values[0] 
print(target_user+'ì˜ rating_by_problems_sum:', t_rating_b_problems_sum)

# target userê°€ ì†í•œ í‹°ì–´ì™€ í•œ ë‹¨ê³„ ë†’ì€ í‹°ì–´ì™€ì˜ rating_by_problems_sum ë¶„í¬ í™•ì¸
# ì´ˆë¡ìƒ‰ ì ì„ : target userì˜ rating_by_problems_sum

plt.figure(figsize=(10,5))
sns.violinplot(x="tier", y="rating_by_problems_sum", data=df_candi_by_tier)
plt.axhline(y=t_rating_b_problems_sum, color='g', linestyle='--')

up_target_user = 'thqjarl' # ì˜ˆì‹œë¡œ ì“¸ íƒ€ê²Ÿ ìœ ì €
up_rating_b_problems_sum = df_tier_10[df_tier_10.handle == up_target_user].rating_by_problems_sum.values[0]
print('tier10ì˜ rating_by_problems_sum:', up_rating_b_problems_sum)

plt.figure(figsize=(10,5))
sns.violinplot(x="tier", y="rating_by_problems_sum", data=df_candi_by_tier)
plt.axhline(y=up_rating_b_problems_sum, color='g', linestyle='--')

"""íƒ€ê²Ÿ ìœ ì €ëŠ” í˜„ì¬ ì†í•œ í‹°ì–´ì—ì„œ ì¤‘ìƒìœ„ê¶Œ ìœ ì €ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
í•œ ë‹¨ê³„ ë†’ì€ ë ˆë²¨ì—ì„œë„ í•˜ìœ„ê¶Œì— ì†í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
íƒ€ê²Ÿ ìœ ì €ë³´ë‹¤ rating_by_problems_sumì´ 100(ì„ì‹œ) ë†’ì€ ìœ ì €ë¡œ ë°”ìš´ë”ë¦¬ ì •í•˜ëŠ” ê²Œ ì¢‹ì•„ ë³´ì…ë‹ˆë‹¤. 
"""

# íƒ€ê²Ÿ ìœ ì €ì˜ rating_by_problems_sum <= í›„ë³´êµ° rating_by_problems_sum <= íƒ€ê²Ÿ ìœ ì €ì˜ rating_by_problems_sum + 100
threshold = 100

print('í›„ë³´ìˆ˜ í›„:', len(df_candi_by_tier)-1)
df_candi_by_rbps = df_candi_by_tier[(df_candi_by_tier.rating_by_problems_sum >= t_rating_b_problems_sum) & (df_candi_by_tier.rating_by_problems_sum <= t_rating_b_problems_sum+threshold)]
print('í›„ë³´ìˆ˜ í›„:',len(df_candi_by_rbps)-1)
df_candi_by_rbps.head()

"""# **PASS Processing df_problems_solved**"""

df_usp = pd.merge(df_users, df_problems_solved, on='handle')
# nullì´ ë‹´ê¸´ ì‚¬ìš©ì ì œê±°
df_usp = df_usp[~df_usp.problems.isnull()]
df_usp

# 3. íƒ€ê²Ÿ ìœ ì € í‘¼ íƒœê·¸ ê¸°ë°˜ìœ¼ë¡œ ë‚˜ì˜ ë¶€ì¡±í•œ ì ì„ ë” ë§ì´ í‘¼ ìœ ì € ì°¾ê¸°

df_problems = df_problems[df_problems.level != 0]
# not_solvable == Falseë§Œ
df_problems = df_problems[df_problems.isSolvable == True]
# tagê°€ nanì¸ ë¬¸ì œ ì œê±°
df_problems = df_problems[~df_problems.tags.isnull()]
df_problems.head()

# í›„ë³´ ìœ ì €ë“¤ë§Œ ì¶”ë¦¬ê¸°  PASS Processing df_problems_solved
candi_users = df_candi_by_rbps.handle.values
df_usp_candi = df_usp[df_usp.handle.isin(candi_users)]
df_usp_candi

# í•„ìš”í•œ íƒœê·¸ ì¹¼ëŸ¼ ì •ë¦¬í•˜ê¸°
tags = ['math', 'implementation', 'greedy', 'string', 'data-structures', 'geometry', 'dp', 'dfs', 'bfs']
for x in tags:
    df_usp_candi[x] = 0

df_usp_candi

def class_user_tag(df):    
    # íŠ¹ì • ìœ ì €ê°€ í‘¼ problems êµ¬í•˜ê¸°
    for user in tqdm(candi_users):
        if (len(df[df.handle == user].problems.values) == 0):
            continue;
        df_one_user_problems = df[df.handle == user].problems.values[0]
        one_user_problems = df_one_user_problems.split(',')

        # íŠ¹ì • ìœ ì €ê°€ í‘¼ problemsì˜ íƒœê·¸ ê°’ë“¤ êµ¬í•˜ê¸°
        user_tag = []
        for i in range(len(one_user_problems)):
            one_problem = df_problems[df_problems.problemId == int(one_user_problems[i])]
            one_problem_tags = ','.join(one_problem.tags.values).split(',')
            user_tag.extend(one_problem_tags)

        # íŠ¹ì • ìœ ì €ê°€ í‘¼ íƒœê·¸ë³„ ê°œìˆ˜ êµ¬í•˜ê¸°: e.g. counts = {'arithmetic': 1, 'implementation': 3, 'math': 10, ... }
        counts = dict()
        for i in user_tag:
            counts[i] = counts.get(i, 0) + 1

        # íŠ¹ì • ìœ ì €ì˜ íƒœê·¸ ì¹¼ëŸ¼ì— ê° íƒœê·¸ ê°’ ë„£ê¸°
        idx = df[df['handle'] == user].index
        for k, v in counts.items():
            if k in df.columns:
                df.loc[idx, k] = v

    return df

df_candi_with_tags = class_user_tag(df_usp_candi)

# ë¼ì´ë²Œ ìœ ì €êµ°ë“¤ì˜ í‘¼ íƒœê·¸ ìˆ˜ì™€ íƒ€ê²Ÿ ìœ ì €ê°€ í‘¼ íƒœê·¸ ìˆ˜ í™•ì¸
df_target_candi_tags = pd.DataFrame(df_candi_with_tags.sum(axis=0)[tags]).reset_index()
df_target_candi_tags.columns = ['tags', 'num']
df_target_candi_tags.num = df_target_candi_tags.num/len(df_candi_with_tags)

target_tags_values = df_candi_with_tags[df_candi_with_tags.handle == target_user][tags].values
df_target_candi_tags['target'] = target_tags_values[0]
df_target_candi_tags

# ë¼ì´ë²Œ ìœ ì €êµ° ë³´ë‹¤ ë‚´ê°€ ë¶€ì¡±í•œ íƒœê·¸ ë¶€ë¶„ í™•ì¸
bar_width = 0.35
alpha = 0.5
index = np.arange(9)
label = df_target_candi_tags.tags

plt.figure(figsize=(15,5))
p1 = plt.bar(index, df_target_candi_tags.target, bar_width, 
             color='b', alpha=alpha,label=target_user)

p2 = plt.bar(index + bar_width, df_target_candi_tags.num, bar_width, 
            color='r', alpha=alpha,label='mean_users')

plt.title('Compare solved tags of '+target_user+' and mean of users in same user_class', fontsize=15)
plt.ylabel('tags #', fontsize=10)
#plt.xlabel('tags', fontsize=18)
plt.xticks(index, label, fontsize=15, rotation=45)
plt.legend((p1[0], p2[0]), (target_user, 'rival group users'), fontsize=15)
plt.show()

"""íƒ€ê²Ÿ ìœ ì €ëŠ” ë¼ì´ë²Œ ìœ ì €êµ°ë³´ë‹¤ Implementation, math, (string, geometry) ë¥¼ ì ê²Œ 

í’€ì—ˆìŠµë‹ˆë‹¤.
  
greedy, dp, dfs, bfsëŠ” ë” ë§ì´ í’€ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆë„¤ìš”. ğŸ˜
"""

need_more_tags = df_target_candi_tags[df_target_candi_tags.num > df_target_candi_tags.target].tags.values
need_more_tags

# ë¼ì´ë²Œ ìœ ì €êµ°ë“¤ ì¤‘ì—ì„œ ë‚´ê°€ ë¶€ì¡±í•œ ë¶€ë¶„ì„ ë” ê³µë¶€í•œ ìœ ì € í™•ì¸
tag_candi = df_candi_with_tags.copy()

print('í›„ë³´ìˆ˜ í›„:',len(df_candi_by_rbps)-1)
for x in need_more_tags:
    tag_candi = tag_candi[tag_candi[x] >= tag_candi[tag_candi.handle==target_user][x].values[0]]
    print(x+' íƒœê·¸ í•„í„°ë§ í›„: ', end='')
    print(len(tag_candi)-1)

# 4. í›„ë³´êµ°ë“¤ ì¤‘ ëœë¤ìœ¼ë¡œ 3ëª…ì„ ì¶”ì¶œí•´ë´…ë‹ˆë‹¤.

seed = 42

fin_candi = tag_candi[tag_candi.handle != target_user].reset_index()

seq = list(np.arange(len(fin_candi)))
random.seed(seed)
target_rivals_3 = random.sample(seq, 3)
target_rivals_3

fin_candi.iloc[target_rivals_3]

# ë¼ì´ë²Œ ìœ ì €êµ° ë³´ë‹¤ ë‚´ê°€ ë¶€ì¡±í•œ íƒœê·¸ ë¶€ë¶„ í™•ì¸
bar_width = 0.35
alpha = 0.5
index = np.arange(9)
label = df_target_candi_tags.tags

for i in range(3):
    rival_data = fin_candi.iloc[target_rivals_3[i]]
    plt.figure(figsize=(15,5))
    p1 = plt.bar(index, tag_candi[tag_candi.handle == target_user][tags].values[0], bar_width, 
                color='b', alpha=alpha,label=target_user)

    p2 = plt.bar(index + bar_width, rival_data[tags].values, bar_width, 
                color='r', alpha=alpha,label='mean_users')

    plt.title('Compare solved tags of '+target_user+' and their rival', fontsize=15)
    plt.ylabel('tags #', fontsize=10)
    #plt.xlabel('tags', fontsize=18)
    plt.xticks(index, label, fontsize=15, rotation=45)
    plt.legend((p1[0], p2[0]), (target_user, 'rival: '+rival_data.handle), fontsize=15)
    plt.show()

"""ë¹„ìŠ·í•œ ë¼ì´ë²Œê³¼ ë¹„êµí–ˆì„ ë•Œ íƒ€ê²Ÿ ìœ ì €ê°€ ìƒëŒ€ì ìœ¼ë¡œ ëœ í‘¼ íƒœê·¸ ìœ í˜•ì´ ë³´ì´ë„¤ìš”.

## ğŸ’¡ ìœ ì €ì™€ ë¬¸ì œí’€ì´ ê´€ë ¨ ì‹¤í—˜ ë° ê²°ê³¼
  
ìœ ì €ì™€ ë¬¸ì œ í’€ì´ì— ê´€í•´ ë¶„ì„í•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°€ì„¤ì„ ì„¸ìš°ê³  ê²€ì¦í•´ë³¼ê²Œìš”.

ì´ë¥¼ í†µí•´ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì¶”ì²œ ëª¨ë¸ì„ ë§Œë“¤ì–´ì•¼ í• ì§€, í•„í„°ë§ì€ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼í• ì§€ ê³ ë¯¼í•´ ë´…ì‹œë‹¤.

ê°€ì„¤. ìœ ì € í´ë˜ìŠ¤ë³„ ë§ì´ í‘¸ëŠ” íƒœê·¸ ìœ í˜•ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤.
  
ìš°ì„  uniqueí•œ íƒœê·¸ ê°’ì„ êµ¬í•˜ì—¬ ìƒˆë¡œìš´ ì¹¼ëŸ¼ìœ¼ë¡œ ì¶”ê°€í•´ ë´…ì‹œë‹¤. ğŸ˜
"""

unique_tags = []
all_tags = df_problems.tags.str.split(',').values

for x in all_tags:
    unique_tags.extend(x)
    
unique_tags = set(unique_tags)

# ìƒˆë¡œìš´ ì¹¼ëŸ¼ìœ¼ë¡œ ì¶”ê°€í•˜ê¸°
tmp = df_usp.copy()

for x in unique_tags:
    tmp[x] = 0
tmp

sorted(list(tmp.user_class.unique()))

def class_user_tag(user_class):

    users = tmp[tmp.user_class == user_class].handle.values
    
    # íŠ¹ì • ìœ ì €ê°€ í‘¼ problems êµ¬í•˜ê¸°
    for user in tqdm(users):
        df_one_user_problems = df_usp[df_usp.handle == user].problems.values[0]
        one_user_problems = df_one_user_problems.split(',')

        # íŠ¹ì • ìœ ì €ê°€ í‘¼ problemsì˜ íƒœê·¸ ê°’ë“¤ êµ¬í•˜ê¸°
        user_tag = []
        for i in range(len(one_user_problems)):
            if one_user_problems[i] == '':
              continue
            one_problem = df_problems[df_problems.problemId == int(one_user_problems[i])]
            one_problem_tags = ','.join(one_problem.tags.values).split(',')
            user_tag.extend(one_problem_tags)

        # íŠ¹ì • ìœ ì €ê°€ í‘¼ íƒœê·¸ë³„ ê°œìˆ˜ êµ¬í•˜ê¸°: e.g. counts = {'arithmetic': 1, 'implementation': 3, 'math': 10, ... }
        counts = dict()
        for i in user_tag:
            counts[i] = counts.get(i, 0) + 1

        # íŠ¹ì • ìœ ì €ì˜ íƒœê·¸ ì¹¼ëŸ¼ì— ê° íƒœê·¸ ê°’ ë„£ê¸°
        idx = tmp[tmp['handle'] == user].index
        for k, v in counts.items():
            tmp.loc[idx, k] = v

    return tmp

# í´ë˜ìŠ¤ 10ì¸ ìœ ì €ê°€ ë§ì´ í‘¼ íƒœê·¸ ëª©ë¡
class_num = 10

tmp_10 = class_user_tag(class_num)
tags_10_sum = pd.DataFrame(tmp_10[tmp_10.user_class == class_num].sum(axis=0)[unique_tags]).reset_index()
tags_10_sum.columns = ['tag', 'num']
tags_10_sum = tags_10_sum.sort_values('num', ascending=False).reset_index(drop=True)
tags_10_sum#.head()

# í´ë˜ìŠ¤ 6ì¸ ìœ ì €ê°€ ë§ì´ í‘¼ íƒœê·¸ ëª©ë¡
class_num = 6

tmp_6 = class_user_tag(class_num)
tags_6_sum = pd.DataFrame(tmp_6[tmp_6.user_class == class_num].sum(axis=0)[unique_tags]).reset_index()
tags_6_sum.columns = ['tag', 'num']
tags_6_sum = tags_6_sum.sort_values('num', ascending=False).reset_index(drop=True)
tags_6_sum.head(10)

# í´ë˜ìŠ¤ 3ì¸ ìœ ì €ê°€ ë§ì´ í‘¼ íƒœê·¸ ëª©ë¡
class_num = 3

tmp_3 = class_user_tag(class_num)
tags_3_sum = pd.DataFrame(tmp_3[tmp_3.user_class == class_num].sum(axis=0)[unique_tags]).reset_index()
tags_3_sum.columns = ['tag', 'num']
tags_3_sum = tags_3_sum.sort_values('num', ascending=False).reset_index(drop=True)
tags_3_sum.head(10)

# í´ë˜ìŠ¤ 0ì¸ ìœ ì €ê°€ ë§ì´ í‘¼ íƒœê·¸ ëª©ë¡
class_num = 0

tmp_0 = class_user_tag(class_num)
tags_0_sum = pd.DataFrame(tmp_0[tmp_0.user_class == class_num].sum(axis=0)[unique_tags]).reset_index()
tags_0_sum.columns = ['tag', 'num']
tags_0_sum = tags_0_sum.sort_values('num', ascending=False).reset_index(drop=True)
tags_0_sum.head(10)

"""ìœ ì €ë³„ ìˆ˜ì¤€ê³¼ tagëŠ” ìƒê´€ê´€ê³„ê°€ ìˆë‹¤ê³  ë³´ì•˜ê³ , tag ì •ë³´ë¥¼ ìœ ì €ê°€ í‘¸ëŠ” ë¬¸ì œë¥¼ íŒŒì•…í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ íŒë‹¨í–ˆìŠµë‹ˆë‹¤. ğŸ™‚

ì‹¤í—˜: ê°™ì€ í´ë˜ìŠ¤ ë‚´ íƒœê·¸ë³„ í‰ê· ì ìœ¼ë¡œ í‘¼ íšŸìˆ˜ì™€ í•œ ìœ ì €ê°€ í‘¼ íšŸìˆ˜ë¥¼ ë¹„êµí•´ë´…ì‹œë‹¤.
  
ìœ ì € í´ë˜ìŠ¤ê°€ 10ì¸ ìœ ì €ë¥¼ ì„ ì •í•´ì„œ ë¶„ì„í•´ë´…ì‹œë‹¤.
"""

def one_user_tag(user):
    df_one_user_problems = df_usp[df_usp.handle == user].problems.values[0]
    one_user_problems = df_one_user_problems.split(',')

    # íŠ¹ì • ìœ ì €ê°€ í‘¼ problemsì˜ íƒœê·¸ ê°’ë“¤ êµ¬í•˜ê¸°
    user_tag = []
    for i in range(len(one_user_problems)):
        one_problem = df_problems[df_problems.problemId == int(one_user_problems[i])]
        one_problem_tags = ','.join(one_problem.tags.values).split(',')
        user_tag.extend(one_problem_tags)

    # íŠ¹ì • ìœ ì €ê°€ í‘¼ íƒœê·¸ë³„ ê°œìˆ˜ êµ¬í•˜ê¸°: e.g. counts = {'arithmetic': 1, 'implementation': 3, 'math': 10, ... }
    counts = dict()
    for i in user_tag:
        counts[i] = counts.get(i, 0) + 1
    # íŠ¹ì • ìœ ì €ì˜ íƒœê·¸ ì¹¼ëŸ¼ì— ê° íƒœê·¸ ê°’ ë„£ê¸°
    #idx = tmp[tmp['handle'] == user].index
    #for k, v in counts.items():
    #    tmp.loc[idx, k] = v

    return counts

df_usp[df_usp.user_class == 10].head()

# ëœë¤ìœ¼ë¡œ ë½‘ì€ arnold518 í•¸ë“¤ì„ ì§€ë‹Œ ìœ ì €ë¥¼ ë¶„ì„í•´ë³¼ê²Œìš”.

user_name = 'arnold518'
user_counts = one_user_tag(user_name)

user_10_tag = tags_10_sum.copy()
user_10_tag['user'] = 0

for k, v in user_counts.items():
    idx = user_10_tag[user_10_tag.tag == k].index
    user_10_tag.loc[idx, 'user'] = v

user_10_tag.num = user_10_tag.num / len(df_usp[df_usp.user_class == 10])
user_10_tag

top10_user_10_tag = user_10_tag.head(10)

bar_width = 0.35
alpha = 0.5
index = np.arange(10)
label = top10_user_10_tag.tag

plt.figure(figsize=(15,5))
p1 = plt.bar(index, top10_user_10_tag.user, bar_width, 
             color='b', alpha=alpha,label=user_name)

p2 = plt.bar(index + bar_width, top10_user_10_tag.num, bar_width, 
            color='r', alpha=alpha,label='mean_users')

plt.title('Compare solved tags of '+user_name+' and mean values of users in same user_class', fontsize=15)
plt.ylabel('tags #', fontsize=10)
#plt.xlabel('tags', fontsize=18)
plt.xticks(index, label, fontsize=15, rotation=45)
plt.legend((p1[0], p2[0]), (user_name, 'same class users'), fontsize=15)
plt.show()

"""arnold518ì€ ê°™ì€ í´ë˜ìŠ¤ ë‚´ ìœ ì €ë“¤ì— ë¹„í•´ implementation, string, bruteforcingì´ í˜„ì €íˆ ì ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
ë‚˜ì¤‘ì— ê°™ì€ Class ë‚´ ë‹¤ë¥¸ ìœ ì €ë“¤ì˜ í’€ì´ ì´ë ¥ê³¼ ë¹„êµí•˜ì—¬ ìœ ì €ê°€ ë§ì´ í’€ì§€ ì•Šì€ tag ë¬¸ì œ ìœ„ì£¼ë¡œ ì¶”ì²œí•˜ëŠ” ë°©ë²•ì„ ë– ì˜¬ë ¤ë³¼ ìˆ˜ ìˆê² ë„¤ìš”. ğŸ¤”
"""